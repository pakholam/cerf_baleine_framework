'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.close = exports.ready = exports.update = exports.template = exports.$ = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
exports.$ = {
    'code': '#code',
    'section': '#section'
};
exports.template = `
<ui-section id="section" header="资源目录说明" :expanded="true" style="transform: translateY(-38px);" expand>
    <ui-code id="code"></ui-code>
</ui-section>
`;
function update(assetList, metaList) {
    this.assetList = assetList;
    this.metaList = metaList;
    if (assetList.length === 0) {
        this.$.code.innerHTML = '';
    }
    else {
        this.$.code.innerHTML = assetList
            .filter((asset) => {
            const mdFile = (0, path_1.join)(asset.file, `.${asset.name}.md`);
            return (0, fs_1.existsSync)(mdFile);
        })
            .map((asset) => {
            const mdFile = (0, path_1.join)(asset.file, `.${asset.name}.md`);
            const mdStr = (0, fs_1.readFileSync)(mdFile, 'utf-8');
            return assetList.length > 1 ? `${asset.url}:\n ${mdStr}` : mdStr;
        })
            .join('\n') || '';
    }
    if (this.$.code.innerHTML === '') {
        this.$.section.hidden = true;
    }
    else {
        this.$.section.hidden = false;
    }
}
exports.update = update;
function ready() { }
exports.ready = ready;
function close() { }
exports.close = close;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXQtZGlyZWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc291cmNlL2Fzc2V0LWRpcmVjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7OztBQUViLDJCQUE4QztBQUM5QywrQkFBNEI7QUFxQ2YsUUFBQSxDQUFDLEdBQUc7SUFDYixNQUFNLEVBQUUsT0FBTztJQUNmLFNBQVMsRUFBRSxVQUFVO0NBQ3hCLENBQUM7QUFFVyxRQUFBLFFBQVEsR0FBRzs7OztDQUl2QixDQUFDO0FBSUYsU0FBZ0IsTUFBTSxDQUFrQixTQUFrQixFQUFFLFFBQWdCO0lBQ3hFLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBRXpCLElBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDeEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztLQUM5QjtTQUNJO1FBQ0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVM7YUFDNUIsTUFBTSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDZCxNQUFNLE1BQU0sR0FBRyxJQUFBLFdBQUksRUFBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUM7WUFDckQsT0FBTyxJQUFBLGVBQVUsRUFBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUM7YUFDRCxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNYLE1BQU0sTUFBTSxHQUFHLElBQUEsV0FBSSxFQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQztZQUNyRCxNQUFNLEtBQUssR0FBRyxJQUFBLGlCQUFZLEVBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLE9BQU8sU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsT0FBTyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ3JFLENBQUMsQ0FBQzthQUNELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDekI7SUFFRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsS0FBSyxFQUFFLEVBQUU7UUFDOUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztLQUNoQztTQUNJO1FBQ0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztLQUNqQztBQUNMLENBQUM7QUEzQkQsd0JBMkJDO0FBRUQsU0FBZ0IsS0FBSyxLQUFvQixDQUFDO0FBQTFDLHNCQUEwQztBQUUxQyxTQUFnQixLQUFLLEtBQXFCLENBQUM7QUFBM0Msc0JBQTJDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IHsgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XHJcblxyXG5pbnRlcmZhY2UgQXNzZXQge1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIGZpbGU6IHN0cmluZztcclxuICAgIGltcG9ydGVkOiBib29sZWFuO1xyXG4gICAgaW1wb3J0ZXI6IHN0cmluZztcclxuICAgIGludmFsaWQ6IGJvb2xlYW47XHJcbiAgICBpc0RpcmVjdG9yeTogYm9vbGVhbjtcclxuICAgIGxpYnJhcnk6IHtcclxuICAgICAgICBbZXh0bmFtZTogc3RyaW5nXTogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHVybDogc3RyaW5nO1xyXG4gICAgdXVpZDogc3RyaW5nO1xyXG4gICAgdmlzaWJsZTogYm9vbGVhbjtcclxuICAgIHN1YkFzc2V0czoge1xyXG4gICAgICAgIFtpZDogc3RyaW5nXTogQXNzZXQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTWV0YSB7XHJcbiAgICBmaWxlczogc3RyaW5nW107XHJcbiAgICBpbXBvcnRlZDogYm9vbGVhbjtcclxuICAgIGltcG9ydGVyOiBzdHJpbmc7XHJcbiAgICBzdWJNZXRhczoge1xyXG4gICAgICAgIFtpZDogc3RyaW5nXTogTWV0YTtcclxuICAgIH07XHJcbiAgICB1c2VyRGF0YToge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH07XHJcbiAgICB1dWlkOiBzdHJpbmc7XHJcbiAgICB2ZXI6IHN0cmluZztcclxufVxyXG5cclxudHlwZSBTZWxlY3RvcjwkPiA9IHsgJDogUmVjb3JkPGtleW9mICQsIEhUTUxFbGVtZW50PiB9ICYgeyBkaXNwYXRjaChzdHI6IHN0cmluZyk6IHZvaWQsIGFzc2V0TGlzdDogQXNzZXRbXSwgbWV0YUxpc3Q6IE1ldGFbXSB9O1xyXG5cclxuZXhwb3J0IGNvbnN0ICQgPSB7XHJcbiAgICAnY29kZSc6ICcjY29kZScsXHJcbiAgICAnc2VjdGlvbic6ICcjc2VjdGlvbidcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZSA9IGBcclxuPHVpLXNlY3Rpb24gaWQ9XCJzZWN0aW9uXCIgaGVhZGVyPVwi6LWE5rqQ55uu5b2V6K+05piOXCIgOmV4cGFuZGVkPVwidHJ1ZVwiIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zOHB4KTtcIiBleHBhbmQ+XHJcbiAgICA8dWktY29kZSBpZD1cImNvZGVcIj48L3VpLWNvZGU+XHJcbjwvdWktc2VjdGlvbj5cclxuYDtcclxuXHJcbnR5cGUgUGFuZWxUaGlzID0gU2VsZWN0b3I8dHlwZW9mICQ+O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZSh0aGlzOiBQYW5lbFRoaXMsIGFzc2V0TGlzdDogQXNzZXRbXSwgbWV0YUxpc3Q6IE1ldGFbXSkge1xyXG4gICAgdGhpcy5hc3NldExpc3QgPSBhc3NldExpc3Q7XHJcbiAgICB0aGlzLm1ldGFMaXN0ID0gbWV0YUxpc3Q7XHJcblxyXG4gICAgaWYgKGFzc2V0TGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aGlzLiQuY29kZS5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJC5jb2RlLmlubmVySFRNTCA9IGFzc2V0TGlzdFxyXG4gICAgICAgICAgICAuZmlsdGVyKChhc3NldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWRGaWxlID0gam9pbihhc3NldC5maWxlLCBgLiR7YXNzZXQubmFtZX0ubWRgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdHNTeW5jKG1kRmlsZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoKGFzc2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZEZpbGUgPSBqb2luKGFzc2V0LmZpbGUsIGAuJHthc3NldC5uYW1lfS5tZGApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWRTdHIgPSByZWFkRmlsZVN5bmMobWRGaWxlLCAndXRmLTgnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc3NldExpc3QubGVuZ3RoID4gMSA/IGAke2Fzc2V0LnVybH06XFxuICR7bWRTdHJ9YCA6IG1kU3RyO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuam9pbignXFxuJykgfHwgJyc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuJC5jb2RlLmlubmVySFRNTCA9PT0gJycpIHtcclxuICAgICAgICB0aGlzLiQuc2VjdGlvbi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kLnNlY3Rpb24uaGlkZGVuID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkeSh0aGlzOiBQYW5lbFRoaXMpIHsgfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlKHRoaXM6IFBhbmVsVGhpcywpIHsgfSJdfQ==